{% macro performance(filterkeys,limitkeys,delimitkeys,amountkeys) %}

{% set ranges = dbp.get_performance(filterkeys,limitkeys,delimitkeys) %}

{% set minrank = ranges|map(attribute="rank")|reject("none")|max|default(60) %}
{% set minrank = minrank + 20 %}
{% if minrank < 80 %}{% set minrank = 80 %}{% endif %}

<table class="list">
	{% for t in ranges %}

	{% set thisrange = t.range %}
	<tr>
		<td>{{ thisrange.desc() }}</td>
		<td class="rank">
			{{ '#' + t.rank.__str__() if t.rank is not none else 'n/a' }}
		</td>
		<td class="chart">
			{% set prct = ((minrank+1-t.rank)*100/minrank if t.rank is not none else 0) %}
			{{ htmlgenerators.rankLink(thisrange.urikeys(),percent=prct,medal=t.rank,**filterkeys) }}
		</td>



	</tr>
	{% endfor %}
</table>


{%- endmacro %}
