
import os, sys
import glob
import numpy as np

from astropy.time import Time

gpstime = 1220899705.54
skymap = "../data/GRB180913/glg_healpix_all_bn180913783.fit"
skymap = "../data/GRB180913/GRB20180913_annulus.fits" 
cls = [0.5,0.9]
cls = [0.9]

for cl in cls:
    outputDir = "../output/GRB180913/%.3f_Gattini"%cl
    #system_command = "python gwemopt_run --telescope F60 --doSchedule --doSkymap --doPlots --skymap %s --gpstime %d -o %s --doTiles --doSingleExposure --filters g --exposuretimes 30.0 --powerlaw_cl %.3f --doCatalog --doUseCatalog --tilesType hierarchical"%(skymap,gpstime,outputDir,cl)
    outputDir = "../output/GRB180913/%.3f_GWAC"%cl
    system_command = "python gwemopt_run --telescope GWAC --doSchedule --doSkymap --doPlots --skymap %s --gpstime %d -o %s --doTiles --doSingleExposure --filters g --exposuretimes 30.0 --powerlaw_cl %.3f"%(skymap,gpstime,outputDir,cl)
    print(system_command)
    #system_command = "python gwemopt_run --telescope Gattini --doSchedule --doSkymap --doPlots --skymap %s --gpstime %d -o %s --doTiles --doSingleExposure --filters g --exposuretimes 30.0 --powerlaw_cl %.3f"%(skymap,gpstime,outputDir,cl)
    #system_command = "python gwemopt_run --telescope DECam --doSchedule --doSkymap --doPlots --skymap %s --gpstime %d -o %s --doTiles --doSingleExposure --filters g --exposuretimes 30.0 --powerlaw_cl %.3f"%(skymap,gpstime,outputDir,cl)
    print(system_command)
    #os.system(system_command)

    outputDir = "../output/GRB180913/%.3f_ZTF"%cl
    system_command = "python gwemopt_run --telescope ZTF --doSchedule --doSkymap --doPlots --skymap %s --gpstime %d -o %s --doTiles --doSingleExposure --filters g --exposuretimes 30.0 --powerlaw_cl %.3f --doCatalog"%(skymap,gpstime,outputDir,cl)
    print(system_command)

    outputDir = "../output/GRB180913/%.3f_ZTF_DECam"%cl
    system_command = "python gwemopt_run --telescope ZTF,DECam --doSchedule --doSkymap --doPlots --skymap %s --gpstime %d -o %s --doTiles --doSingleExposure --filters g --exposuretimes 30.0 --powerlaw_cl %.3f --doCatalog --doIterativeTiling"%(skymap,gpstime,outputDir,cl)
    print(system_command)

    print(stop)
