!function(t){function e(e){for(var o,i,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(u&&u(e);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={13:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/app/static/dist/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([184,0,2]),n()}({184:function(t,e,n){"use strict";n.r(e);n(3),n(185),n(6);var o=n(9),r=n(1),a=n(4),i=n(2);function s(t){return Date.UTC(t._id.year,t._id.month-1,t._id.day)}r.getJSON(r("#endpoints").attr("data-visits-daily-endpoint"),t=>o.chart("visits-container",{chart:{type:"spline",zoomType:"x"},exporting:{buttons:{contextButton:{menuItems:i.a}}},title:{text:"Visits"},subtitle:{text:"Click and drag to zoom in"},xAxis:{type:"datetime",title:{text:"Date"}},yAxis:{title:{text:"Visits"},min:0},plotOptions:{spline:{marker:{enabled:!0}}},series:[{name:"Unique visits",color:"#FCE2CC",data:t.map(t=>[s(t),t.first_time_visits])},{name:"Total visits",color:"#FC580C",data:t.map(t=>[s(t),t.all_visits])}]})),r.getJSON(r("#endpoints").attr("data-geoip-endpoint"),t=>{Promise.all([Object(a.a)(),Object(a.b)()]).then(([e,n])=>{Object(i.b)("us-map",e,"US visitors","postal-code",t.us),Object(i.b)("world-map",n,"Worldwide visitors","iso-a2",t.world)})});const c={Firefox:"rgba(244,199,133,1.0)",Chrome:"rgba(200,240,97,1.0)",Safari:"rgba(155,186,238,1.0)","Microsoft Internet Explorer":"rgba(136,198,247,1.0)","Microsoft Edge":"rgba(136,198,247,1.0)",Opera:"rgba(238,120,124,1.0)",Unknown:"rgba(80,80,80,0.2)"},l={Linux:"rgba(216,171,36,1.0)",Windows:"rgba(129,238,208,1.0)",Mac:"rgba(201,201,201,1.0)",Android:"rgba(200,227,120,1.0)",Unknown:"rgba(80,80,80,0.2)"},u={Facebook:"rgba(0,75,150,1.0)",Twitter:"rgba(147,191,241,1.0)",Instagram:"rgba(193,131,212,1.0)",Reddit:"rgba(241,155,123,1.0)",Unknown:"rgba(80,80,80,0.2)"};function d(t,e,n){o.chart(t,{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},exporting:{buttons:{contextButton:{menuItems:i.a}}},title:{text:e},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",showInLegend:!0,dataLabels:{enabled:!1,format:"<b>{point.name}</b>: {point.percentage:.1f}%"}}},series:[{name:"Referrers",colorByPoint:!0,data:n}]})}r.getJSON(r("#endpoints").attr("data-referer-endpoint"),t=>{const e=[];Object.keys(t).forEach(n=>{e.push({name:n,y:t[n],color:u[n]})}),d("referer-stats","Referrer Statistics",e)}),r.getJSON(r("#endpoints").attr("data-useragent-endpoint"),t=>{const e=[],n=[];Object.keys(t.browser).forEach(n=>{e.push({name:n,y:t.browser[n],color:c[n]})}),Object.keys(t.platform).forEach(e=>{n.push({name:e,y:t.platform[e],color:l[e]})}),d("browser-stats","Browser Statistics",e),d("platform-stats","Platform Statistics",n)}),r(".clear-visits-button").click(t=>{const e=r("#endpoints").attr("data-short-url");r("#clear-visits-short-url").val(e),r("#clear-visits-modal").modal()})},185:function(t,e,n){},2:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var o=n(11);const r=["printChart","separator","downloadPNG","downloadJPEG","downloadSVG"];function a(t,e,n,a,i){o.mapChart(t,{chart:{map:e},title:{text:n},subtitle:{text:"(Logarithmic scale)"},mapNavigation:{enabled:!0},exporting:{sourceWidth:600,sourceHeight:500,buttons:{contextButton:{menuItems:r}}},legend:{layout:"vertical",align:"left",verticalAlign:"bottom"},colorAxis:{min:1,type:"logarithmic",minColor:"#FCE2CC",maxColor:"#FC580C"},series:[{data:i,joinBy:[a,"code"],name:"Visits",tooltip:{pointFormat:"{point.name}: {point.value}"}}]})}},4:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var o=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))};function r(){return o(this,void 0,void 0,(function*(){let t=yield fetch("https://code.highcharts.com/mapdata/countries/us/us-all.geo.json");return yield t.json()}))}function a(){return o(this,void 0,void 0,(function*(){let t=yield fetch("https://code.highcharts.com/mapdata/custom/world.geo.json");return yield t.json()}))}},6:function(t,e,n){"use strict";var o=n(1);function r(t){const e=o("html").attr("data-csrf-token"),n=t.attr("data-ajax-endpoint"),r=t.find("input"),a=new URLSearchParams;for(const t of r){const e=o(t).attr("name");o(t).is(":checkbox")?a.append(e,o(t).is(":checked")?"true":"false"):a.append(e,o(t).val())}t.find("input.is-invalid").removeClass("is-invalid"),fetch(n,{method:"post",body:a,headers:{"X-CSRFToken":e}}).then(t=>t.json()).then(e=>{if(e.ok)location.reload();else for(const n of e.errors){const e=t.find(`input[name=${n.name}]`);e.addClass("is-invalid");let r=e.siblings("div.invalid-feedback");const a=e.attr("data-invalid-feedback");a&&(r=o(a)),r&&r.html(n.error)}})}o("form.ajax-form input").on("keypress",t=>{if(13==t.which){r(o(t.target).closest("form.ajax-form"))}}),o("form.ajax-form button").click(t=>{r(o(t.target).closest("form.ajax-form"))})}});